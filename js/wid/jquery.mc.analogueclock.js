var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var g=b[d];g in c||(c[g]={});c=c[g]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(a,b,d){var c=this.length||0;0>b&&(b=Math.max(0,c+b));if(null==d||d>c)d=c;d=Number(d);0>d&&(d=Math.max(0,c+d));for(b=Number(b||0);b<d;b++)this[b]=a;return this}},"es6","es3");
$.widget("mc.analogueclock",$.mc.master,{options:{_touch:2,hashWidOpts:"angleType,hour,min,sec,realTime",draggable:!0,sweepMin:!0,rows:10,cols:10,hour:19,min:58,sec:0,fraction:null,fracGrads:"auto",snapMin:!0,showAng:!1,showArc:!1,gradLineCap:"butt",handLineCap:"round",_sqr_fracGradWidth:.03,_sqr_minGradWidth:.1,_sqr_majGradWidth:.2,thinHands:!1,_sqr_arcWidth:.05,_sqr_handWidths:[.3,.3,.05],circs:[1,.95,.9,.83],handLengths:[.5,.75,.8],_color_grid:"rgba(0,0,0,0)",_color_rim:"rgba(255,0,0,1)",_color_gradback:"rgba(220,220,255,1)",
_color_face:"rgba(255,255,255,1)",_color_back:"rgba(255,255,255,0)",_color_line:"rgba(0,0,0,1)",_color_nos:"rgba(0,0,0,1)",_color_grad:"rgba(0,0,0,1)",_color_sec:"rgba(0,0,255,1)",_color_min:"rgba(100,255,0,1)",_color_hour:"rgba(255,165,0,1)",_color_arcText:"rgba(0,0,0,1)",_color_arcLine:"rgba(255,0,0,1)",_color_arcFill:"rgba(0,0,255,0.2)",_color_fracFill:"rgba(255,215,0,0.5)",_color_fracGrad:"rgb(0,0,0)",angleType:"hour to min",realTime:!0},realTime:function(b){var a=this,c=a._ob,d=a.options;clearInterval(c.timeId);
d.realTime=b;$(c.mpArr).toggle(!d.realTime);d.realTime&&(c.timeId=setInterval(function(){var b=new Date;b.getSeconds()!==d.sec&&(a.setDate(b),a._setMarks(c,d),a._paint(),a._trigEvent("tick"))},250))},_refO:function(){var b=this.options,a=this.date;b.hour=a.getHours();b.min=a.getMinutes();b.sec=a.getSeconds()},setDate:function(b,a){var c=this.options;0===arguments.length&&(b=new Date,b.setHours(c.hour),b.setMinutes(c.min),b.setSeconds(c.sec));this.date=b;this._refO();a&&this._update("refresh")},_simplify:function(b,
a){var c=function f(a,b){return b?f(b,a%b):a};c=c(b,a);return[b/c,a/c]},_trigEvent:function(b){var a=this.options,c=this._ob;this._trigger(b,$.event,{hour:a.hour,min:a.min,sec:a.sec,frac:c.frac,angle:c.angle,angleType:a.angleType,arcProps:c.arcProps})},date:null,_start:function(){var b=this._ob,a=this.options;this.setDate();"undefined"===typeof a.x&&(a.x=a.cols/2);"undefined"===typeof a.y&&(a.y=a.rows/2);"undefined"===typeof a.r&&(a.r=a.rows/2);a=Modernizr.touchevents?.5:.25;b.ptSet=new PtSet(b.mp,
b.$canv,b.sqr,{w:2*a,h:2*a,r:a},[0,0,0,0,0,0]);bb.addRemElems(b.mpArr,"<div class='mc-mark mc-hover'>",3,b.mp);this._mkDraggable($([b.mpArr[1],b.mpArr[2]]))},getDigitArr:function(b){for(var a=this.options,c=[a.hour,Math.floor(a.min),a.sec],d=0;3>d;d++)c[d]=bb.padNos(c[d],2);b||(c[0]=a.hour%12,0===c[0]&&(c[0]=12),c.push(12>a.hour?"AM":"PM"));return c},_setMarks:function(b,a){b.ptSet.setPos(0,a.x,a.y);var c=b.ptSet.getPt(0);b.fracArr=[a.min/720+a.hour/12,a.min/60,a.sec/60];a.sweepMin&&(b.fracArr[1]+=
a.sec/3600);for(var d=0;2>d;d++)bb.polarPt(c,a.handLengths[d]*a.rows*.5,Math.PI/2-2*Math.PI*b.fracArr[d],b.ptSet.getPt(d+1))},_update:function(b,a){var c=this._ob,d=this.options,g=0;switch(b){case "resize":bb.setCtx(c.ctx,{font:c.r/13+"px sans-serif",textBaseline:"middle",textAlign:"center"});c.ptSet.refresh(c.sqr);this.realTime(d.realTime);g=1;break;case "fraction":var e="change";break;case "angleType":c.hasColor.sec="seconds"===a?!bb.isTransparent(d._color_sec):!1;e="change";break;case "realTime":this.realTime(d.realTime);
g=1;break;case "drag":var f=function(){return[30<d.min,6<d.hour%12]};a=f();e=Math.PI/2-bb.getAngProps(c.ptSet.getPt(0),c.ptSet.getPt(c.dragInd)).ang;0>e&&(e+=2*Math.PI);1===c.dragInd?(b=Math.floor(6*e/Math.PI),d.hour=b+(12<=d.hour?12:0),f=f(),a=a[1]-f[1],e=60*(6*e/Math.PI-b),1===a&&3>=b&&(d.hour+=12),-1===a&&9<=b&&(d.hour-=12),d.min=d.snapMin?Math.floor(e):e):2===c.dragInd&&(e=30*e/Math.PI,d.sec=d.snapMin?0:60*(e-Math.floor(e)),d.min=d.snapMin?Math.floor(e):e,f=f(),a=a[0]-f[0],1===a&&0<=d.min&&15>
d.min&&d.hour++,-1===a&&45<d.min&&59>=d.min&&d.hour--);this.setDate();e="change";break;case "ani":this.mate=!0;break;case "refresh":g=1;e="program";break;case "dragstop":g=1;break;case "aniEnd":this.mate=!1;this.setDate();e="aniEnd";g=1;break;case "hour":case "min":case "sec":this.setDate(),g=1}this._setMarks(c,d);g&&$(c.mpArr).each(function(a){$(this).css(c.ptSet.getCss(a))});this._paint();e&&this._trigEvent(e)},_paint:function(){var b=this._ob,a=this.options,c=b.ctx,d=b.sqr,g=null,e;if(!this.mate&&
a.fraction){var f=a[a.fraction];var m=this._simplify(f,60);b.frac=[[f,60]];b.frac.push(m);var k=60/m[1];"none"!==a.fracGrads&&($.isNumeric(a.fracGrads)&&(k=60/a.fracGrads),g=[])}else b.frac=null;c.save();this.clear();this.gridsEtc();f=[];var l=[];for(e=0;3>e;e++)f.push(b.ptSet.getCPt(e).cPt);var h=f[0];for(e=0;4>e;e++)m=a.circs[e]*a.r*d,l.push(m),3>e&&(c.fillStyle=[a._color_rim,a._color_gradback,a._color_face][e],bb.circle(c,h,m),c.fill());bb.setCtx(b.ctx,{fillStyle:a._color_nos,lineCap:a.gradLineCap,
strokeStyle:a._color_grad,font:2*(l[2]-l[3])+"px sans-serif"});d=[];m=[];var t=Math.PI/180*6;for(e=0;60>e;e++){var q=-Math.PI/2+e*t,p=Math.cos(q),r=Math.sin(q);q={x:h.x+p*l[1],y:h.y+r*l[1]};p={x:h.x+p*l[2],y:h.y+r*l[2]};g&&0===e%k&&g.push(h,p);0===e%5?m.push(q,p):d.push(q,p)}c.lineWidth=b.sqrs.minGradWidth;bb.lines(c,d,!1,!1,!1);c.lineWidth=b.sqrs.majGradWidth;bb.lines(c,m,!1,!1,!1);for(e=0;12>e;e++){var n=bb.polarPt(h,l[3],(-e+2)*Math.PI/6);c.fillText(e+1,n.x,n.y)}b.frac&&(c.lineWidth=b.sqrs.fracGradWidth,
c.fillStyle=a._color_fracFill,c.strokeStyle=a._color_fracGrad,n="min"===a.fraction?f[2]:n,k=bb.arcProps(h,{x:h.x,y:h.y-100},n),g&&bb.lines(c,g,!1,!1,!1),bb.drawArc(c,h,k.arcSt,k.arcEnd,4*b.sqr,!0,"segNoFill"));c.lineCap=a.handLineCap;var u=[];$.each(["hour","min","sec"],function(d,e){b.hasColor[e]&&(c.strokeStyle=a["_color_"+e],c.lineWidth=a.thinHands?.05*b.sqr:b.sqrs.handWidths[d],e=2*Math.PI*b.fracArr[d],u.push(e),n=bb.polarPt(h,l[0]*a.handLengths[d],Math.PI/2-e),bb.lines(c,[h,n],!1,!1,!1))});k=
"seconds"===a.angleType?bb.arcProps(h,{x:f[0].x,y:f[0].y-100},n):"hour to min"===a.angleType?bb.arcProps(h,f[1],f[2]):bb.arcProps(h,f[2],f[1]);b.arcProps=k;c.lineWidth=b.sqrs.arcWidth;c.fillStyle=a._color_arcFill;c.strokeStyle=a._color_arcLine;a.showArc&&bb.drawArc(c,h,k.arcSt,k.arcEnd,b.sqr,!0,b.hasColor.arcFill?"seg":"arc");g=bb.polarPt(h,1.3*b.sqr,k.lab);b.angle=k.deg;a.showAng&&b.hasColor.arcText&&(c.fillStyle=a._color_arcText,c.fillText(k.deg.toFixed(0)+"\u00b0",g.x,g.y));a.draggable&&!a.realTime&&
bb.markers(c,a.mark,[f[1],f[2]]);c.restore()}});
